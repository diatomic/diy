<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>DIY: IO</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DIY
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">data-parallel out-of-core C++ library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">IO</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Block I/O: DIY writes and reads blocks to and from storage in either collective or independent mode. The collective mode, which is the default, creates one file. Independent mode creates one file per process. These features should not be confused with the temporary block I/O that DIY does in the course of shuffling blocks in and out of core while executing the block <code>foreach</code> functions. This happens behind the scenes and is not the subject of the I/O module.</p>
<h2>Collective I/O </h2>
<ul>
<li><code><a class="el" href="group___i_o.html#ga33ca463272d91acec03e5386a1b80ecf" title="Write blocks to storage collectively in one shared file. ">diy::io::write_blocks()</a></code></li>
<li><code><a class="el" href="group___i_o.html#ga7ecff62ad7c013211233a33425b49952" title="Read blocks from storage collectively from one shared file. ">diy::io::read_blocks()</a></code></li>
</ul>
<h2>Independent I/O </h2>
<ul>
<li><code><a class="el" href="group___i_o.html#ga33ca463272d91acec03e5386a1b80ecf" title="Write blocks to storage collectively in one shared file. ">diy::io::split::write_blocks()</a></code></li>
<li><code><a class="el" href="group___i_o.html#ga7ecff62ad7c013211233a33425b49952" title="Read blocks from storage collectively from one shared file. ">diy::io::split::read_blocks()</a></code></li>
</ul>
<p>An example (of collective I/O) is below: </p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> mem_blocks = -1;</div>
<div class="line"><span class="keywordtype">int</span> num_threads = 1;</div>
<div class="line"><a class="code" href="classdiy_1_1mpi_1_1communicator.html">diy::mpi::communicator</a>    world(comm);</div>
<div class="line"><a class="code" href="classdiy_1_1_file_storage.html">diy::FileStorage</a>          storage(<span class="stringliteral">&quot;./DIY.XXXXXX&quot;</span>);</div>
<div class="line"><a class="code" href="classdiy_1_1_master.html">diy::Master</a>               master(world,</div>
<div class="line">                                 num_threads,</div>
<div class="line">                                 mem_blocks);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">// --- write ---</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// the total number of blocks, tot_blocks, is set by user</span></div>
<div class="line"><a class="code" href="classdiy_1_1_contiguous_assigner.html">diy::ContiguousAssigner</a> assigner(world.size(), tot_blocks);</div>
<div class="line"><span class="comment">// the block_save function is unnecessary if it was defined as part of master</span></div>
<div class="line"><a class="code" href="group___i_o.html#ga33ca463272d91acec03e5386a1b80ecf">diy::io::write_blocks</a>(filename, world, master, &amp;block_save);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">// --- read ---</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// the number of blocks is -1 because it is determined by read_blocks()</span></div>
<div class="line"><a class="code" href="classdiy_1_1_contiguous_assigner.html">diy::ContiguousAssigner</a> assigner(world.size(), -1);</div>
<div class="line"><span class="comment">// the block_load function is unnecessary if it was defined as part of master</span></div>
<div class="line"><a class="code" href="group___i_o.html#ga7ecff62ad7c013211233a33425b49952">diy::io::read_blocks</a>(filename, world, *assigner, master, &amp;block_load);</div>
</div><!-- fragment --><p>In addition, the <a href="https://github.com/diatomic/diy/tree/master/examples/io">examples/io directory</a> illustrates BOV (brick of values) and NumPy I/O, which is built on top of MPI-IO and MPI sub-array types. The <a class="el" href="io_2test-io_8cpp-example.html">test-io.cpp example</a> tests the readers and writers for BOV and NumPy. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga33ca463272d91acec03e5386a1b80ecf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_o.html#ga33ca463272d91acec03e5386a1b80ecf">diy::io::write_blocks</a> (const std::string &amp;outfilename, const mpi::communicator &amp;comm, Master &amp;master, const MemoryBuffer &amp;extra=MemoryBuffer(), Master::SaveBlock save=0)</td></tr>
<tr class="memdesc:ga33ca463272d91acec03e5386a1b80ecf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write blocks to storage collectively in one shared file.  <a href="#ga33ca463272d91acec03e5386a1b80ecf">More...</a><br/></td></tr>
<tr class="separator:ga33ca463272d91acec03e5386a1b80ecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ecff62ad7c013211233a33425b49952"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_o.html#ga7ecff62ad7c013211233a33425b49952">diy::io::read_blocks</a> (const std::string &amp;infilename, const mpi::communicator &amp;comm, StaticAssigner &amp;assigner, Master &amp;master, MemoryBuffer &amp;extra, Master::LoadBlock load=0)</td></tr>
<tr class="memdesc:ga7ecff62ad7c013211233a33425b49952"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read blocks from storage collectively from one shared file.  <a href="#ga7ecff62ad7c013211233a33425b49952">More...</a><br/></td></tr>
<tr class="separator:ga7ecff62ad7c013211233a33425b49952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89b32ee9be0f8de92f6bcb7a096b7f58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_o.html#ga89b32ee9be0f8de92f6bcb7a096b7f58">diy::io::split::write_blocks</a> (const std::string &amp;outfilename, const mpi::communicator &amp;comm, Master &amp;master, const MemoryBuffer &amp;extra=MemoryBuffer(), Master::SaveBlock save=0)</td></tr>
<tr class="memdesc:ga89b32ee9be0f8de92f6bcb7a096b7f58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write blocks to storage independently in one file per process.  <a href="#ga89b32ee9be0f8de92f6bcb7a096b7f58">More...</a><br/></td></tr>
<tr class="separator:ga89b32ee9be0f8de92f6bcb7a096b7f58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2ae9d9ae783821c026b06e6f17941b1f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_o.html#ga2ae9d9ae783821c026b06e6f17941b1f">diy::io::split::read_blocks</a> (const std::string &amp;infilename, const mpi::communicator &amp;comm, StaticAssigner &amp;assigner, Master &amp;master, MemoryBuffer &amp;extra, Master::LoadBlock load=0)</td></tr>
<tr class="memdesc:ga2ae9d9ae783821c026b06e6f17941b1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read blocks from storage independently from one file per process.  <a href="#ga2ae9d9ae783821c026b06e6f17941b1f">More...</a><br/></td></tr>
<tr class="separator:ga2ae9d9ae783821c026b06e6f17941b1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga7ecff62ad7c013211233a33425b49952"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diy::io::read_blocks </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>infilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mpi::communicator &amp;&#160;</td>
          <td class="paramname"><em>comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StaticAssigner &amp;&#160;</td>
          <td class="paramname"><em>assigner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Master &amp;&#160;</td>
          <td class="paramname"><em>master</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MemoryBuffer &amp;&#160;</td>
          <td class="paramname"><em>extra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Master::LoadBlock&#160;</td>
          <td class="paramname"><em>load</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read blocks from storage collectively from one shared file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">infilename</td><td>input file name </td></tr>
    <tr><td class="paramname">comm</td><td>communicator </td></tr>
    <tr><td class="paramname">assigner</td><td>assigner object </td></tr>
    <tr><td class="paramname">master</td><td>master object </td></tr>
    <tr><td class="paramname">extra</td><td>user-defined metadata in file header </td></tr>
    <tr><td class="paramname">load</td><td>load block function in case different than or unefined in the master </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simple_2read-blocks_8cpp-example.html#a12">simple/read-blocks.cpp</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga2ae9d9ae783821c026b06e6f17941b1f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diy::io::split::read_blocks </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>infilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mpi::communicator &amp;&#160;</td>
          <td class="paramname"><em>comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StaticAssigner &amp;&#160;</td>
          <td class="paramname"><em>assigner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Master &amp;&#160;</td>
          <td class="paramname"><em>master</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MemoryBuffer &amp;&#160;</td>
          <td class="paramname"><em>extra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Master::LoadBlock&#160;</td>
          <td class="paramname"><em>load</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read blocks from storage independently from one file per process. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">infilename</td><td>input file name </td></tr>
    <tr><td class="paramname">comm</td><td>communicator </td></tr>
    <tr><td class="paramname">assigner</td><td>assigner object </td></tr>
    <tr><td class="paramname">master</td><td>master object </td></tr>
    <tr><td class="paramname">extra</td><td>user-defined metadata in file header </td></tr>
    <tr><td class="paramname">load</td><td>block load function in case different than or undefined in master </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga33ca463272d91acec03e5386a1b80ecf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diy::io::write_blocks </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outfilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mpi::communicator &amp;&#160;</td>
          <td class="paramname"><em>comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Master &amp;&#160;</td>
          <td class="paramname"><em>master</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const MemoryBuffer &amp;&#160;</td>
          <td class="paramname"><em>extra</em> = <code>MemoryBuffer()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Master::SaveBlock&#160;</td>
          <td class="paramname"><em>save</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write blocks to storage collectively in one shared file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">outfilename</td><td>output file name </td></tr>
    <tr><td class="paramname">comm</td><td>communicator </td></tr>
    <tr><td class="paramname">master</td><td>master object </td></tr>
    <tr><td class="paramname">extra</td><td>user-defined metadata for file header; meaningful only on rank == 0 </td></tr>
    <tr><td class="paramname">save</td><td>block save function in case different than or undefined in the master </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="simple_2simple_8cpp-example.html#a23">simple/simple.cpp</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga89b32ee9be0f8de92f6bcb7a096b7f58"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void diy::io::split::write_blocks </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outfilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mpi::communicator &amp;&#160;</td>
          <td class="paramname"><em>comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Master &amp;&#160;</td>
          <td class="paramname"><em>master</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const MemoryBuffer &amp;&#160;</td>
          <td class="paramname"><em>extra</em> = <code>MemoryBuffer()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Master::SaveBlock&#160;</td>
          <td class="paramname"><em>save</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write blocks to storage independently in one file per process. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">outfilename</td><td>output file name </td></tr>
    <tr><td class="paramname">comm</td><td>communicator </td></tr>
    <tr><td class="paramname">master</td><td>master object </td></tr>
    <tr><td class="paramname">extra</td><td>user-defined metadata for file header; meaningful only on rank == 0 </td></tr>
    <tr><td class="paramname">save</td><td>block save function in case different than or undefined in master </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 2 2018 20:47:15 for DIY by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
