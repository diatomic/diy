<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>DIY: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DIY
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">data-parallel out-of-core C++ library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DIY Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>DIY is a block-parallel library for writing scalable distributed- and shared-memory parallel algorithms that can run both in- and out-of-core. The same program can be executed with one or more threads per MPI process and with one or more data blocks resident in main memory. The abstraction enabling these capabilities is block-parallelism; blocks and their message queues are mapped onto processing elements (MPI processes or threads) and are migrated between memory and storage by the DIY runtime. Complex communication patterns, including neighbor exchange, merge reduction, swap reduction, and all-to-all exchange, are implemented in DIY.</p>
<p>DIY follows a bulk-synchronous processing (BSP) programming model. A simple program, shown below, consists of the following components:</p>
<ul>
<li><code>struct</code>s called blocks,</li>
<li>the diy object called <code>master</code>,</li>
<li>callback functions performed on each block by <code>master.foreach()</code>,</li>
<li>message exchanges between the blocks by <code>master.exchange()</code></li>
</ul>
<p><code><a class="el" href="classdiy_1_1_master.html">diy::Master</a></code> owns the blocks, put into it using the <a class="el" href="classdiy_1_1_master.html#aeab2723bb0ecd4f7316b4805c1b53a61">add()</a> method. Its main two methods are foreach() and <a class="el" href="classdiy_1_1_master.html#a832ae002e1031fa1b0c8956d6baf94e8">exchange()</a>. foreach(f) calls back a function <code>f()</code> with every block. The function is responsible for performing computation and scheduling communication using <a class="el" href="structdiy_1_1_master_1_1_proxy.html#a1752f60f14167a972c7e0519baa02e90">enqueue()</a>/<a class="el" href="structdiy_1_1_master_1_1_proxy.html#a1c2d7f947714e9641175b7da68d8d19b">dequeue()</a> operations. The actual communication is performed by <a class="el" href="classdiy_1_1_master.html#a832ae002e1031fa1b0c8956d6baf94e8">exchange()</a>.</p>
<h2>Example </h2>
<p>The callback functions <code>enqueue_local()</code> and <code>average()</code> in the example below are given the block pointer and a communication proxy for the message exchange between blocks. The callback functions typically enqueue or dequeue messages from the proxy. In this way, information can be received and sent during rounds of message exchange.</p>
<div class="fragment"><div class="line"><span class="comment">// --- main program --- //</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">struct </span>Block { <span class="keywordtype">float</span> local, average; };             <span class="comment">// define your block structure</span></div>
<div class="line"></div>
<div class="line">Master master(world);                               <span class="comment">// world = MPI_Comm</span></div>
<div class="line">...                                                 <span class="comment">// populate master with blocks</span></div>
<div class="line">master.foreach(&amp;enqueue_local);                     <span class="comment">// call enqueue_local() for each block</span></div>
<div class="line">master.exchange();                                  <span class="comment">// exchange enqueued data between blocks</span></div>
<div class="line">master.foreach(&amp;average);                           <span class="comment">// call average() for each block</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// --- callback functions --- //</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// enqueue block data prior to exchanging it</span></div>
<div class="line"><span class="keywordtype">void</span> enqueue_local(Block* b,                        <span class="comment">// current block</span></div>
<div class="line">                   <span class="keyword">const</span> Proxy&amp; cp)                 <span class="comment">// communication proxy provides access to the neighbor blocks</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; cp.link()-&gt;size(); i++)  <span class="comment">// for all neighbor blocks</span></div>
<div class="line">        cp.enqueue(cp.link()-&gt;target(i), b-&gt;local); <span class="comment">// enqueue the data to be sent to this neighbor</span></div>
<div class="line">                                                    <span class="comment">// block in the next exchange</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// use the received data after exchanging it, in this case compute its average</span></div>
<div class="line"><span class="keywordtype">void</span> average(Block* b,                              <span class="comment">// current block</span></div>
<div class="line">             <span class="keyword">const</span> Proxy&amp; cp)                       <span class="comment">// communication proxy provides access to the neighbor blocks</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">float</span> x, average = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; cp.link()-&gt;size(); i++)  <span class="comment">// for all neighbor blocks</span></div>
<div class="line">    {</div>
<div class="line">        cp.dequeue(cp.link()-&gt;target(i).gid, x);    <span class="comment">// dequeue the data received from this</span></div>
<div class="line">                                                    <span class="comment">// neighbor block in the last exchange</span></div>
<div class="line">        average += x;</div>
<div class="line">    }</div>
<div class="line">    b-&gt;average = average / cp.link()-&gt;size();</div>
<div class="line">}</div>
</div><!-- fragment --><h2>Getting Started </h2>
<p>More information about getting started creating blocks, assigning them to processes, and decomposing a domain can be found in the Initialization page. Complete examples of working programs can be found in the <a class="el" href="group___examples.html">Examples</a> page.</p>
<h2>Components </h2>
<ul>
<li><a class="el" href="group___tutorial.html">Tutorial</a></li>
<li><a class="el" href="group___serialization.html">Serialization</a></li>
<li><a class="el" href="group___decomposition.html">Decomposition</a></li>
<li><a class="el" href="group___communication.html">Communication</a></li>
<li>Callbacks</li>
<li><a class="el" href="group___immediate.html">Immediate Mode</a></li>
<li><a class="el" href="group___i_o.html">IO</a></li>
<li><a class="el" href="group___examples.html">Examples</a></li>
<li><a class="el" href="classdiy_1_1_master.html">diy::Master</a></li>
<li>diy::Communicator</li>
<li><a class="el" href="classdiy_1_1_assigner.html">diy::Assigner</a></li>
<li><a class="el" href="classdiy_1_1_file_storage.html">diy::FileStorage</a></li>
<li><a class="el" href="group___m_p_i.html">MPI wrapper</a> for convenience.</li>
</ul>
<h2>Download </h2>
<p>DIY is <a href="http://github.com/diatomic/diy">available on Github</a>, subject to a <a href="https://github.com/diatomic/diy/blob/master/LICENSE.txt">variation of a 3-clause BSD license</a>. You can download the <a href="https://github.com/diatomic/diy/archive/master.tar.gz">latest tarball</a>.</p>
<dl class="section author"><dt>Authors</dt><dd><a href="http://mrzv.org">Dmitriy Morozov</a> </dd>
<dd>
<a href="http://www.mcs.anl.gov/~tpeterka/">Tom Peterka</a> </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 6 2020 02:15:19 for DIY by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
